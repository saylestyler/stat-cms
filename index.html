<!DOCTYPE html>
<html lang="en">

<head>
    <title>stat cms</title>
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <style>
        .button-container {
            position: absolute;
            right: 0;
            top: 0;
        }

        .button-container button {
            margin: 10px;
        }

        #editor {
            height: 400px;
            width: 600px;
        }

        #textarea {
            height: 400px;
            width: 600px;
        }
    </style>
</head>

<body>
    <div class="button-container">
        <button>Cloudinary</button>
        <button>Save</button>
        <button style="background-color: red;">Cancel</button>
    </div>
    <!-- initialization of quill; editor replaces this div-->
    <div id="editor"></div>
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
    <script>
        var quill = new Quill('#editor', {
            theme: 'snow'
        });
    </script>
    <div id="primary-rendering-area"></div>

    </div>

    <script>
        const cleanupPostListItem = (post) => {
            const cleanedUpPostListItem = {
                id: post.id,
                name: post.name,
                content: post.content,
                created_at: post.created_at,
                updated_at: post.updated_at
            }
            return cleanedUpPostListItem
        }
        const getAllPosts = () => {
            console.log("ðŸš€ getAllPosts was called:")

            return fetch('/posts')
                .then(response => response.json())
                .then(data => {
                    const posts = data;
                    let postsHTML = '';
                    if (!Array.isArray(posts)) return []
                    if (Array.isArray(posts) && posts.length === 0) return []

                    posts.forEach(post => {
                        const cleanedUpPostListItem = cleanupPostListItem(post)
                        postsHTML += `<div class="post">
                            <h2>${cleanedUpPostListItem.name}</h2>
                            <p>${cleanedUpPostListItem.id}</p>
                            <p>${cleanedUpPostListItem.content}</p>
                            <p>${cleanedUpPostListItem.created_at}</p>
                            <p>${cleanedUpPostListItem.updated_at}</p>
                        </div>`;
                    });
                    document.getElementById('primary-rendering-area').innerHTML = postsHTML;
                })
            // .catch(error => console.error('Error:', error));

        }

        getAllPosts()
        // this will be done via github's api, for now it's static json object
    </script>
</body>

</html>
</div>